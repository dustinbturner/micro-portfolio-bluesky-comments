---
import Layout from "@layouts/Layout.astro";
import Container from "@components/Container.astro";
import { SITE, HOME, SOCIALS } from "@consts";
import ArrowCard from "@components/ArrowCard.astro";
import Link from "@components/Link.astro";
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";
import NewsletterForm from "@components/NewsletterForm.astro";

const blog = (await getCollection("blog"))
  .filter((post) => !post.data.draft)
  .sort(
    (a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf()
  )
  .slice(0, SITE.NUM_POSTS_ON_HOMEPAGE);

const projects: CollectionEntry<"projects">[] = (
  await getCollection("projects")
)
  .filter((project) => !project.data.draft)
  .sort(
    (a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf()
  )
  .slice(0, SITE.NUM_PROJECTS_ON_HOMEPAGE);
---

<Layout title={HOME.TITLE} description={HOME.DESCRIPTION}>
  <Container>
    <aside data-pagefind-ignore class='py-8'>
      <h1 class='font-semibold text-neutral-800'>Hi I'm Dustin.</h1>
      <div class='space-y-16'>
        {/* Bio Section */}
        <section class='mb-16'>
          <article class='space-y-10'>
            <span>
              <p class='text-md mb-6'>
                <Link href='https://blueskyroast.com/roast/dustinturner.io'>
                  Chief Encourager of Indie Innovation on Bluesky
                </Link>
              </p>
              <p>
                I'm a self-taught, full-stack developer that is currently
                building
                <Link href='https://bluesletter.social'>
                  bluesletter.social
                </Link>
                , a platform using the Bluesky ecosystem and AT protocol to help
                entrepreneurs, creators, and builders make use of social media more
                authentically.
              </p>
            </span>

            {/* Tech Stack Icons */}
            <div class='flex w-full max-w-xl items-center justify-evenly'>
              {/* Next */}
              <svg class='h-6 w-6 fill-neutral-800' viewBox='0 0 128 128'>
                <path
                  d='M64 0C28.7 0 0 28.7 0 64s28.7 64 64 64c11.2 0 21.7-2.9 30.8-7.9L48.4 55.3v36.6h-6.8V41.8h6.8l50.5 75.8C116.4 106.2 128 86.5 128 64c0-35.3-28.7-64-64-64zm22.1 84.6l-7.5-11.3V41.8h7.5v42.8z'
                ></path>
              </svg>

              {/* Go */}
              <svg class='h-6 w-6 fill-neutral-800' viewBox='0 0 128 128'>
                <g fill-rule='evenodd'
                  ><path
                    d='M11.156 54.829c-.243 0-.303-.122-.182-.303l1.273-1.637c.12-.182.424-.303.666-.303H34.55c.243 0 .303.182.182.364l-1.03 1.576c-.121.181-.424.363-.606.363zM2.004 60.404c-.242 0-.303-.12-.182-.303l1.273-1.636c.121-.182.424-.303.667-.303h27.636c.242 0 .364.182.303.364l-.485 1.454c-.06.243-.303.364-.545.364zM16.67 65.98c-.242 0-.302-.182-.181-.364l.848-1.515c.122-.182.364-.363.607-.363h12.12c.243 0 .364.181.364.424l-.12 1.454c0 .243-.243.425-.425.425zM79.58 53.738c-3.819.97-6.425 1.697-10.182 2.666-.91.243-.97.303-1.758-.606-.909-1.03-1.576-1.697-2.848-2.303-3.819-1.878-7.516-1.333-10.97.91-4.121 2.666-6.242 6.605-6.182 11.514.06 4.849 3.394 8.849 8.182 9.516 4.121.545 7.576-.91 10.303-4 .545-.667 1.03-1.394 1.636-2.243H56.064c-1.272 0-1.575-.788-1.151-1.818.788-1.879 2.242-5.03 3.09-6.606.183-.364.607-.97 1.516-.97h22.06c-.12 1.637-.12 3.273-.363 4.91-.667 4.363-2.303 8.363-4.97 11.878-4.364 5.758-10.06 9.333-17.273 10.303-5.939.788-11.454-.364-16.302-4-4.485-3.394-7.03-7.879-7.697-13.454-.788-6.606 1.151-12.546 5.151-17.758 4.303-5.636 10-9.212 16.97-10.485 5.697-1.03 11.151-.363 16.06 2.97 3.212 2.121 5.515 5.03 7.03 8.545.364.546.122.849-.606 1.03z'
                  ></path><path
                    d='M99.64 87.253c-5.515-.122-10.546-1.697-14.788-5.334-3.576-3.09-5.818-7.03-6.545-11.697-1.091-6.848.787-12.909 4.909-18.302 4.424-5.819 9.757-8.849 16.97-10.122 6.181-1.09 12-.484 17.272 3.091 4.788 3.273 7.757 7.697 8.545 13.515 1.03 8.182-1.333 14.849-6.97 20.546-4 4.06-8.909 6.606-14.545 7.757-1.636.303-3.273.364-4.848.546zm14.424-24.485c-.06-.788-.06-1.394-.182-2-1.09-6-6.606-9.394-12.363-8.06-5.637 1.272-9.273 4.848-10.606 10.545-1.091 4.727 1.212 9.515 5.575 11.454 3.334 1.455 6.667 1.273 9.879-.363 4.788-2.485 7.394-6.364 7.697-11.576z'
                    fill-rule='nonzero'></path></g
                >
              </svg>

              {/* Python */}
              <svg class='h-6 w-6 fill-neutral-800' viewBox='0 0 128 128'>
                <path
                  d='M49.33 62h29.159c8.117 0 14.511-6.868 14.511-15.019v-27.798c0-7.912-6.632-13.856-14.555-15.176-5.014-.835-10.195-1.215-15.187-1.191-4.99.023-9.612.448-13.805 1.191-12.355 2.181-14.453 6.751-14.453 15.176v10.817h29v4h-40.224000000000004c-8.484 0-15.914 5.108-18.237 14.811-2.681 11.12-2.8 17.919 0 29.53 2.075 8.642 7.03 14.659 15.515 14.659h9.946v-13.048c0-9.637 8.428-17.952 18.33-17.952zm-1.838-39.11c-3.026 0-5.478-2.479-5.478-5.545 0-3.079 2.451-5.581 5.478-5.581 3.015 0 5.479 2.502 5.479 5.581-.001 3.066-2.465 5.545-5.479 5.545zM122.281 48.811c-2.098-8.448-6.103-14.811-14.599-14.811h-10.682v12.981c0 10.05-8.794 18.019-18.511 18.019h-29.159c-7.988 0-14.33 7.326-14.33 15.326v27.8c0 7.91 6.745 12.564 14.462 14.834 9.242 2.717 17.994 3.208 29.051 0 7.349-2.129 14.487-6.411 14.487-14.834v-11.126h-29v-4h43.682c8.484 0 11.647-5.776 14.599-14.66 3.047-9.145 2.916-17.799 0-29.529zm-41.955 55.606c3.027 0 5.479 2.479 5.479 5.547 0 3.076-2.451 5.579-5.479 5.579-3.015 0-5.478-2.502-5.478-5.579 0-3.068 2.463-5.547 5.478-5.547z'
                ></path>
              </svg>
              {/* Tailwind */}
              <svg class='h-6 w-6 fill-neutral-800' viewBox='0 0 128 128'>
                <path
                  d='M64.004 25.602c-17.067 0-27.73 8.53-32 25.597 6.398-8.531 13.867-11.73 22.398-9.597 4.871 1.214 8.352 4.746 12.207 8.66C72.883 56.629 80.145 64 96.004 64c17.066 0 27.73-8.531 32-25.602-6.399 8.536-13.867 11.735-22.399 9.602-4.87-1.215-8.347-4.746-12.207-8.66-6.27-6.367-13.53-13.738-29.394-13.738zM32.004 64c-17.066 0-27.73 8.531-32 25.602C6.402 81.066 13.87 77.867 22.402 80c4.871 1.215 8.352 4.746 12.207 8.66 6.274 6.367 13.536 13.738 29.395 13.738 17.066 0 27.73-8.53 32-25.597-6.399 8.531-13.867 11.73-22.399 9.597-4.87-1.214-8.347-4.746-12.207-8.66C55.128 71.371 47.868 64 32.004 64z'
                ></path>
              </svg>

              {/* PyTorch */}
              <svg class='h-6 w-6 fill-neutral-800' viewBox='0 0 128 128'>
                <path
                  d='M100.1 38.3l-9.2 9.2c15.1 15.1 15.1 39.4 0 54.3-15.1 15.1-39.4 15.1-54.3 0-15.1-15.1-15.1-39.4 0-54.3l24-24 3.4-3.4V2L27.8 38.2C7.7 58.3 7.7 90.8 27.8 111s52.6 20.1 72.4 0c20.1-20.2 20.1-52.5-.1-72.7z'
                ></path>
                <circle
                  transform='rotate(-88.939 82.069 29.398) scale(.99997)'
                  cx='82.1'
                  cy='29.4'
                  r='6.7'></circle>
              </svg>

              {/* Tensorflow */}
              <svg class='h-6 w-6 fill-neutral-800' viewBox='0 0 128 128'>
                <path
                  d='M 61.55,128 39.71,115.32 V 40.55 L 6.81,59.56 6.89,31.24 61.55,0 Z m 4.91,-128 v 128 l 21.84,-12.68 V 79.31 l 16.49,9.53 -0.1,-24.63 -16.39,-9.36 v -14.3 l 32.89,19.01 -0.08,-28.32 z'
                ></path>
              </svg>
            </div>
          </article>
        </section>
      </div>

      {/* Newsletter Section */}
      <section class='mb-16 space-y-6'>
        <div class='mb-8 flex flex-wrap items-center justify-between gap-y-2'>
          <h2 class='font-semibold text-neutral-800'>Newsletter</h2>
        </div>
        <div>
          <NewsletterForm />
        </div>
      </section>

      {/* Latest Posts Section */}
      <section class='mb-16'>
        <div class='mb-8 flex flex-wrap items-center justify-between gap-y-2'>
          <h2 class='font-semibold text-neutral-800'>Latest posts</h2>
          <Link href='/blog'> See all posts </Link>
        </div>
        <ul class='not-prose flex flex-col gap-6'>
          {
            blog.map((post) => (
              <li>
                <ArrowCard entry={post} />
              </li>
            ))
          }
        </ul>
      </section>

      {/* Current Project Section */}
      <section class='mb-16'>
        <div class='mb-8 flex flex-wrap items-center justify-between gap-y-2'>
          <h2 class='font-semibold text-neutral-800'>Current Project</h2>
          <Link href='/projects'> See all projects </Link>
        </div>
        <ul class='not-prose flex flex-col gap-6'>
          {
            projects.map((project) => (
              <li>
                <ArrowCard entry={project} />
              </li>
            ))
          }
        </ul>
      </section>

      {/* Let's Connect Section */}
      <section class='mb-16'>
        <h2 class='mb-8 font-semibold text-neutral-800'>Let's Connect</h2>
        <article class='mb-6'>
          <p>
            If you want to get in touch with me about something or just to say
            hi, reach out on social media or send me an email.
          </p>
        </article>
        <ul class='not-prose flex flex-wrap gap-2'>
          {
            SOCIALS.map((SOCIAL) => (
              <li class='flex gap-x-2 text-nowrap'>
                <Link
                  href={SOCIAL.HREF}
                  external
                  aria-label={`${SITE.TITLE} on ${SOCIAL.NAME}`}
                >
                  {SOCIAL.NAME}
                </Link>
                {"/"}
              </li>
            ))
          }
          <li class='line-clamp-1'>
            <Link
              href={`mailto:${SITE.EMAIL}`}
              aria-label={`Email ${SITE.TITLE}`}
            >
              {SITE.EMAIL}
            </Link>
          </li>
        </ul>
      </section>
    </aside>
  </Container>
</Layout>
